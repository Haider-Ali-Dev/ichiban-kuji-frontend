<app-navbar></app-navbar>

<div *ngIf="this.listing" class="p-5">
    <div class="flex gap-5 flex-wrap justify-center mt-5">
        <div>
            <img class="h-[400px] sm:h-[200px] md:h-[250px] rounded" [alt]="listing.title" [src]="listing.image">
        </div>
        <div class="flex flex-col gap-5">
            <div class="mb-4">
                <p class="text-[35px] font-bold">
                    {{listing.title}}
                </p>
            </div>

            <div class="flex justify-between w-2">
                <p class="flex justify-center flex-col content-center">
                    <i class="material-icons text-[28px]">
                        paid</i>
                </p>
                <p class="text-[30px]">
                    {{calculateAverageCostOfBox()}}
                </p>

            </div>

            <div class="flex justify-center gap-5 p-5 border-2 bg-[#D4F1F4] w-[300px]">
                <button (click)="changeBoxIndex()" class="border-2 p-3 justify-between bg-white w-10">
                    < </button>

                        <p class="flex justify-center flex-col content-center w-[] ">
                            Box {{boxChoosenIndex}} of {{listing.box_count}}
                        </p>

                        <button (click)="changeBoxIndex()" class="border-2 p-3 justify-between bg-white w-10">
                            >
                        </button>



            </div>
            <p class="text-center p-2 rounded bg-red-400 text-white font-bold" *ngIf="showMessage">
                {{message}} - <a [routerLink]="['', 'buy', 'points']" class="text-blue-400">
                    Buy Coins
                </a>
            </p>
            <button (click)="buyBox()" class="w-[350x] text-center p-5 bg-blue-400">
                Buy
            </button>
        </div>
    </div>

    <div class="">
        <h1 class="text-center text-[40px] st">ShowCase</h1>
        <div class="flex justify-center">
            <div class="grid grid-cols-3 md:grid-cols-2 sm:grid-cols-1">
                <div *ngFor="let product of listing.boxes[boxChoosenIndex - 1].products">
                    <app-product-card [product]="product"></app-product-card>
                </div>
            </div>
        </div>

    </div>
</div>